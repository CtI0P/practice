中间件层 - 处理请求前后的逻辑